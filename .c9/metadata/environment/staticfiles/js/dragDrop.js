{"filter":false,"title":"dragDrop.js","tooltip":"/staticfiles/js/dragDrop.js","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":76,"column":7},"action":"insert","lines":["$(document).ready(function() {","","","        /* initialize the external events","        -----------------------------------------------------------------*/","","        $('#external-events .fc-event').each(function() {","","            // store data so the calendar knows to render an event upon drop","            $(this).data('event', {","                title: $.trim($(this).text()), // use the element's text as the event title","                stick: true // maintain when user navigates (see docs on the renderEvent method)","            });","","            // make the event draggable using jQuery UI","            $(this).draggable({","                zIndex: 999,","                revert: true,      // will cause the event to go back to its","                revertDuration: 0  //  original position after the drag","            });","","        });","","","        /* initialize the calendar","        -----------------------------------------------------------------*/","","        $('#calendar').fullCalendar({","            header: {","                left: 'prev,next today',","                center: 'title',","                right: 'month,agendaWeek,agendaDay'","            },","            editable: true,","            droppable: true, // this allows things to be dropped onto the calendar","            dragRevertDuration: 0,","            drop: function() {","                // is the \"remove after drop\" checkbox checked?","                if ($('#drop-remove').is(':checked')) {","                    // if so, remove the element from the \"Draggable Events\" list","                    $(this).remove();","                }","            },","            eventDragStop: function( event, jsEvent, ui, view ) {","                ","                if(isEventOverDiv(jsEvent.clientX, jsEvent.clientY)) {","                    $('#calendar').fullCalendar('removeEvents', event._id);","                    var el = $( \"<div class='fc-event'>\" ).appendTo( '#external-events-listing' ).text( event.title );","                    el.draggable({","                      zIndex: 999,","                      revert: true, ","                      revertDuration: 0 ","                    });","                    el.data('event', { title: event.title, id :event.id, stick: true });","                }","            }","        });","","","        var isEventOverDiv = function(x, y) {","","            var external_events = $( '#external-events' );","            var offset = external_events.offset();","            offset.right = external_events.width() + offset.left;","            offset.bottom = external_events.height() + offset.top;","","            // Compare","            if (x >= offset.left","                && y >= offset.top","                && x <= offset.right","                && y <= offset .bottom) { return true; }","            return false;","","        }","","","    });"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":76,"column":7},"action":"remove","lines":["$(document).ready(function() {","","","        /* initialize the external events","        -----------------------------------------------------------------*/","","        $('#external-events .fc-event').each(function() {","","            // store data so the calendar knows to render an event upon drop","            $(this).data('event', {","                title: $.trim($(this).text()), // use the element's text as the event title","                stick: true // maintain when user navigates (see docs on the renderEvent method)","            });","","            // make the event draggable using jQuery UI","            $(this).draggable({","                zIndex: 999,","                revert: true,      // will cause the event to go back to its","                revertDuration: 0  //  original position after the drag","            });","","        });","","","        /* initialize the calendar","        -----------------------------------------------------------------*/","","        $('#calendar').fullCalendar({","            header: {","                left: 'prev,next today',","                center: 'title',","                right: 'month,agendaWeek,agendaDay'","            },","            editable: true,","            droppable: true, // this allows things to be dropped onto the calendar","            dragRevertDuration: 0,","            drop: function() {","                // is the \"remove after drop\" checkbox checked?","                if ($('#drop-remove').is(':checked')) {","                    // if so, remove the element from the \"Draggable Events\" list","                    $(this).remove();","                }","            },","            eventDragStop: function( event, jsEvent, ui, view ) {","                ","                if(isEventOverDiv(jsEvent.clientX, jsEvent.clientY)) {","                    $('#calendar').fullCalendar('removeEvents', event._id);","                    var el = $( \"<div class='fc-event'>\" ).appendTo( '#external-events-listing' ).text( event.title );","                    el.draggable({","                      zIndex: 999,","                      revert: true, ","                      revertDuration: 0 ","                    });","                    el.data('event', { title: event.title, id :event.id, stick: true });","                }","            }","        });","","","        var isEventOverDiv = function(x, y) {","","            var external_events = $( '#external-events' );","            var offset = external_events.offset();","            offset.right = external_events.width() + offset.left;","            offset.bottom = external_events.height() + offset.top;","","            // Compare","            if (x >= offset.left","                && y >= offset.top","                && x <= offset.right","                && y <= offset .bottom) { return true; }","            return false;","","        }","","","    });"],"id":3},{"start":{"row":0,"column":0},"end":{"row":48,"column":9},"action":"insert","lines":["        $(function () {","            var kanbanCol = $('.panel-body');","            kanbanCol.css('max-height', (window.innerHeight - 150) + 'px');","","            var kanbanColCount = parseInt(kanbanCol.length);","            $('.container-fluid').css('min-width', (kanbanColCount * 350) + 'px');","","            draggableInit();","","            $('.panel-heading').click(function() {","                var $panelBody = $(this).parent().children('.panel-body');","                $panelBody.slideToggle();","            });","        });","","        function draggableInit() {","            var sourceId;","","            $('[draggable=true]').bind('dragstart', function (event) {","                sourceId = $(this).parent().attr('id');","                event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));","            });","","            $('.panel-body').bind('dragover', function (event) {","                event.preventDefault();","            });","","            $('.panel-body').bind('drop', function (event) {","                var children = $(this).children();","                var targetId = children.attr('id');","","                if (sourceId != targetId) {","                    var elementId = event.originalEvent.dataTransfer.getData(\"text/plain\");","","                 //   $('#processing-modal').modal('toggle'); //before post","","","                    // Post data ","               //     setTimeout(function () {","                        var element = document.getElementById(elementId);","                        children.prepend(element);","                //        $('#processing-modal').modal('toggle'); // after post","                //    }, 1000);","","                }","","                event.preventDefault();","            });","        }"]}],[{"start":{"row":0,"column":0},"end":{"row":48,"column":9},"action":"remove","lines":["        $(function () {","            var kanbanCol = $('.panel-body');","            kanbanCol.css('max-height', (window.innerHeight - 150) + 'px');","","            var kanbanColCount = parseInt(kanbanCol.length);","            $('.container-fluid').css('min-width', (kanbanColCount * 350) + 'px');","","            draggableInit();","","            $('.panel-heading').click(function() {","                var $panelBody = $(this).parent().children('.panel-body');","                $panelBody.slideToggle();","            });","        });","","        function draggableInit() {","            var sourceId;","","            $('[draggable=true]').bind('dragstart', function (event) {","                sourceId = $(this).parent().attr('id');","                event.originalEvent.dataTransfer.setData(\"text/plain\", event.target.getAttribute('id'));","            });","","            $('.panel-body').bind('dragover', function (event) {","                event.preventDefault();","            });","","            $('.panel-body').bind('drop', function (event) {","                var children = $(this).children();","                var targetId = children.attr('id');","","                if (sourceId != targetId) {","                    var elementId = event.originalEvent.dataTransfer.getData(\"text/plain\");","","                 //   $('#processing-modal').modal('toggle'); //before post","","","                    // Post data ","               //     setTimeout(function () {","                        var element = document.getElementById(elementId);","                        children.prepend(element);","                //        $('#processing-modal').modal('toggle'); // after post","                //    }, 1000);","","                }","","                event.preventDefault();","            });","        }"],"id":4},{"start":{"row":0,"column":0},"end":{"row":68,"column":3},"action":"insert","lines":["var itemContainers = [].slice.call(document.querySelectorAll('.board-column-content'));","var columnGrids = [];","var boardGrid;","","// Define the column grids so we can drag those","// items around.","itemContainers.forEach(function (container) {","","  // Instantiate column grid.","  var grid = new Muuri(container, {","    items: '.board-item',","    layoutDuration: 400,","    layoutEasing: 'ease',","    dragEnabled: true,","    dragSort: function () {","      return columnGrids;","    },","    dragSortInterval: 0,","    dragContainer: document.body,","    dragReleaseDuration: 400,","    dragReleaseEasing: 'ease'","  })","  .on('dragStart', function (item) {","    // Let's set fixed widht/height to the dragged item","    // so that it does not stretch unwillingly when","    // it's appended to the document body for the","    // duration of the drag.","    item.getElement().style.width = item.getWidth() + 'px';","    item.getElement().style.height = item.getHeight() + 'px';","  })","  .on('dragReleaseEnd', function (item) {","    // Let's remove the fixed width/height from the","    // dragged item now that it is back in a grid","    // column and can freely adjust to it's","    // surroundings.","    item.getElement().style.width = '';","    item.getElement().style.height = '';","    // Just in case, let's refresh the dimensions of all items","    // in case dragging the item caused some other items to","    // be different size.","    columnGrids.forEach(function (grid) {","      grid.refreshItems();","    });","  })","  .on('layoutStart', function () {","    // Let's keep the board grid up to date with the","    // dimensions changes of column grids.","    boardGrid.refreshItems().layout();","  });","","  // Add the column grid reference to the column grids","  // array, so we can access it later on.","  columnGrids.push(grid);","","});","","// Instantiate the board grid so we can drag those","// columns around.","boardGrid = new Muuri('.board', {","  layoutDuration: 400,","  layoutEasing: 'ease',","  dragEnabled: true,","  dragSortInterval: 0,","  dragStartPredicate: {","    handle: '.board-column-header'","  },","  dragReleaseDuration: 400,","  dragReleaseEasing: 'ease'","});"]}],[{"start":{"row":0,"column":87},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":87},"action":"insert","lines":["var itemContainers = [].slice.call(document.querySelectorAll('.board-column-content'));"],"id":6}],[{"start":{"row":1,"column":62},"end":{"row":1,"column":83},"action":"remove","lines":[".board-column-content"],"id":7},{"start":{"row":1,"column":62},"end":{"row":1,"column":63},"action":"insert","lines":["#"]},{"start":{"row":1,"column":63},"end":{"row":1,"column":64},"action":"insert","lines":["c"]},{"start":{"row":1,"column":64},"end":{"row":1,"column":65},"action":"insert","lines":["o"]},{"start":{"row":1,"column":65},"end":{"row":1,"column":66},"action":"insert","lines":["l"]},{"start":{"row":1,"column":66},"end":{"row":1,"column":67},"action":"insert","lines":["s"]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":3},"action":"insert","lines":["// "],"id":8}],[{"start":{"row":24,"column":27},"end":{"row":24,"column":28},"action":"remove","lines":["t"],"id":9},{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"remove","lines":["h"]}],[{"start":{"row":24,"column":26},"end":{"row":24,"column":27},"action":"insert","lines":["t"],"id":10},{"start":{"row":24,"column":27},"end":{"row":24,"column":28},"action":"insert","lines":["h"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["// "],"id":11}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":3},"action":"remove","lines":["// "],"id":12}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":65},"end":{"row":0,"column":65},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":23,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1536098725900,"hash":"5807e8ccdfbc60fac5de81ef3eb643fc8592dbf7"}