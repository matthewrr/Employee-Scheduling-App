{"changed":true,"filter":false,"title":"views.py","tooltip":"/events/views.py","value":"import csv, datetime\nfrom django.http import HttpResponse, JsonResponse\nfrom django.shortcuts import get_object_or_404, render\nfrom django.template.loader import render_to_string\nfrom django.views import View\nfrom django.core.paginator import EmptyPage, PageNotAnInteger, Paginator\n\nfrom .forms import EventForm\nfrom .models import *\nfrom pprint import pprint\n\nfrom django.views.decorators.csrf import csrf_exempt\nimport json\n\n@csrf_exempt\ndef update_schedule(request):\n    if request.method == 'POST':\n        mydata = request.POST.get('schedule', None)\n        pk = request.POST.get('event_id', None)\n        event = get_object_or_404(Event, pk=pk)\n        event.schedule = mydata\n        event.save()\n    return HttpResponse(\"I'm working!\")\n\n@csrf_exempt\ndef create_template(request):\n    if request.method == 'POST':\n        mydata = request.POST.get('schedule', None)\n        pk = request.POST.get('event_id', None)\n        event = get_object_or_404(Event, pk=pk)\n        event.schedule = mydata\n        event.save()\n    return HttpResponse(\"I'm working!\")\n\n\n#dont fetch if not changed\ndef schedule_template(schedule={},locations=None,template=False):\n    locations = Location.objects.all()\n    for location in locations:\n        schedule[str(location.id)] = {}\n        schedule[str(location.id)]['active'] = True\n        schedule[str(location.id)]['bar'] = location.bar\n        schedule[str(location.id)]['location'] = location\n        schedule[str(location.id)]['positions'] = {}\n        for position in location.position_set.all():\n            schedule[str(location.id)]['positions'][position.code] = {'employee':str(position),\n                                                                      'arrival_time':''\n                                                                          }\n    return schedule\n\ndef event_detail_view(request,year,month,day,slug):\n    all_employees = Employee.objects.all()\n    event = Event.objects.get(slug=slug)\n    template = json.loads(event.schedule) if event.schedule else schedule_template()\n    context = {'event':event,\n               'schedule':template,\n               'all_employees':all_employees,\n               'roles': ['Managers','Cashiers','Preps','Bartenders'],\n               'template':False,\n               }\n    return render(request, './events/detail/event_detail.html', context)\n\ndef event_list(request):\n    events_list = Event.objects.all().order_by('-date')\n    paginator = Paginator(events_list, 20)\n    page = request.GET.get('page')\n    events = paginator.get_page(page)\n    return render(request, 'objects/list.html', {'events': events, 'obj':'event', 'objs':'events'})\n\ndef event_create(request):\n    if request.method == 'POST':\n        form = EventForm(request.POST)\n    else:\n        form = EventForm()\n    return save_event_form(request, form, 'objects/create.html')\n\ndef event_update(request, pk):\n    event = get_object_or_404(Event, pk=pk)\n    if request.method == 'POST':\n        form = EventForm(request.POST, instance=event)\n    else:\n        form = EventForm(instance=event)\n    return save_event_form(request, form, 'objects/update.html')\n\ndef save_event_form(request, form, template_name):\n    data = dict()\n    try:\n        date = str(form['date'].value())\n        format_str = '%Y-%m-%d'\n        date_obj = datetime.datetime.strptime(date, format_str)\n        expired = date_obj < datetime.datetime.today()\n    except:\n        expired = False\n    \n    if request.method == 'POST':\n        if form.is_valid():\n            form.save()\n            data['form_is_valid'] = True\n            events = Event.objects.all().order_by('-date')\n            data['html_object_list'] = render_to_string('events/event_list_ajax.html', {\n                'events': events,'expired': expired\n            })\n        else:\n            data['form_is_valid'] = False\n    context = {'form': form, 'obj':'event'}\n    data['html_form'] = render_to_string(template_name, context, request=request)\n    return JsonResponse(data)\n\ndef event_delete(request, pk):\n    event = get_object_or_404(Event, pk=pk)\n    data = dict()\n    expired = event.event_category\n    if request.method == 'POST':\n        event.delete()\n        data['form_is_valid'] = True\n        events = Event.objects.all().order_by('-date')\n        data['html_object_list'] = render_to_string('events/event_list_ajax.html', {\n            'events': events, 'expired': expired,\n        })\n    else:\n        context = {'object': event, 'obj': 'event', 'expired': expired,}\n        print(event)\n        data['html_form'] = render_to_string('objects/delete.html',\n            context,\n            request=request,\n        )\n    return JsonResponse(data)\n    \ndef export_events(request):\n    response = HttpResponse(content_type='text/csv')\n    response['Content-Disposition'] = 'attachment; filename=\"all_events.csv\"'\n\n    writer = csv.writer(response)\n    writer.writerow(['event_id', 'title', 'date', 'doors_open', 'alcohol', 'slug'])\n\n    events = Event.objects.all().values_list('event_id', 'title', 'date', 'doors_open', 'alcohol', 'slug')\n    for event in events:\n        writer.writerow(event)\n\n    return response\n\ndef create_template(request):\n    schedule = schedule_template()\n    context = {'schedule':schedule,\n               'roles': ['Managers','Cashiers','Preps','Bartenders'],\n               'template':True,\n               'detail':'d-none'\n               }\n    return render(request, './events/templates/create.html', context)","undoManager":{"mark":-8,"position":100,"stack":[[{"start":{"row":130,"column":29},"end":{"row":131,"column":0},"action":"insert","lines":["",""],"id":2570},{"start":{"row":131,"column":0},"end":{"row":131,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":25,"column":48},"end":{"row":25,"column":49},"action":"insert","lines":[","],"id":2571},{"start":{"row":25,"column":49},"end":{"row":25,"column":50},"action":"insert","lines":["t"]},{"start":{"row":25,"column":50},"end":{"row":25,"column":51},"action":"insert","lines":["e"]},{"start":{"row":25,"column":51},"end":{"row":25,"column":52},"action":"insert","lines":["m"]},{"start":{"row":25,"column":52},"end":{"row":25,"column":53},"action":"insert","lines":["p"]},{"start":{"row":25,"column":53},"end":{"row":25,"column":54},"action":"insert","lines":["a"]},{"start":{"row":25,"column":54},"end":{"row":25,"column":55},"action":"insert","lines":["l"]},{"start":{"row":25,"column":55},"end":{"row":25,"column":56},"action":"insert","lines":["t"]},{"start":{"row":25,"column":56},"end":{"row":25,"column":57},"action":"insert","lines":["e"]}],[{"start":{"row":25,"column":56},"end":{"row":25,"column":57},"action":"remove","lines":["e"],"id":2572},{"start":{"row":25,"column":55},"end":{"row":25,"column":56},"action":"remove","lines":["t"]},{"start":{"row":25,"column":54},"end":{"row":25,"column":55},"action":"remove","lines":["l"]},{"start":{"row":25,"column":53},"end":{"row":25,"column":54},"action":"remove","lines":["a"]}],[{"start":{"row":25,"column":53},"end":{"row":25,"column":54},"action":"insert","lines":["l"],"id":2573},{"start":{"row":25,"column":54},"end":{"row":25,"column":55},"action":"insert","lines":["a"]},{"start":{"row":25,"column":55},"end":{"row":25,"column":56},"action":"insert","lines":["t"]},{"start":{"row":25,"column":56},"end":{"row":25,"column":57},"action":"insert","lines":["e"]}],[{"start":{"row":25,"column":57},"end":{"row":25,"column":58},"action":"insert","lines":["="],"id":2574}],[{"start":{"row":25,"column":58},"end":{"row":25,"column":59},"action":"insert","lines":["F"],"id":2575},{"start":{"row":25,"column":59},"end":{"row":25,"column":60},"action":"insert","lines":["a"]},{"start":{"row":25,"column":60},"end":{"row":25,"column":61},"action":"insert","lines":["l"]},{"start":{"row":25,"column":61},"end":{"row":25,"column":62},"action":"insert","lines":["s"]},{"start":{"row":25,"column":62},"end":{"row":25,"column":63},"action":"insert","lines":["e"]}],[{"start":{"row":32,"column":52},"end":{"row":33,"column":0},"action":"insert","lines":["",""],"id":2576},{"start":{"row":33,"column":0},"end":{"row":33,"column":8},"action":"insert","lines":["        "]},{"start":{"row":33,"column":8},"end":{"row":33,"column":9},"action":"insert","lines":["i"]},{"start":{"row":33,"column":9},"end":{"row":33,"column":10},"action":"insert","lines":["f"]}],[{"start":{"row":33,"column":10},"end":{"row":33,"column":11},"action":"insert","lines":[" "],"id":2577}],[{"start":{"row":33,"column":11},"end":{"row":33,"column":12},"action":"insert","lines":["n"],"id":2578},{"start":{"row":33,"column":12},"end":{"row":33,"column":13},"action":"insert","lines":["o"]},{"start":{"row":33,"column":13},"end":{"row":33,"column":14},"action":"insert","lines":["t"]}],[{"start":{"row":33,"column":14},"end":{"row":33,"column":15},"action":"insert","lines":[" "],"id":2579},{"start":{"row":33,"column":15},"end":{"row":33,"column":16},"action":"insert","lines":["t"]},{"start":{"row":33,"column":16},"end":{"row":33,"column":17},"action":"insert","lines":["e"]},{"start":{"row":33,"column":17},"end":{"row":33,"column":18},"action":"insert","lines":["m"]},{"start":{"row":33,"column":18},"end":{"row":33,"column":19},"action":"insert","lines":["p"]},{"start":{"row":33,"column":19},"end":{"row":33,"column":20},"action":"insert","lines":["l"]},{"start":{"row":33,"column":20},"end":{"row":33,"column":21},"action":"insert","lines":["a"]},{"start":{"row":33,"column":21},"end":{"row":33,"column":22},"action":"insert","lines":["t"]}],[{"start":{"row":33,"column":21},"end":{"row":33,"column":22},"action":"remove","lines":["t"],"id":2580},{"start":{"row":33,"column":20},"end":{"row":33,"column":21},"action":"remove","lines":["a"]},{"start":{"row":33,"column":19},"end":{"row":33,"column":20},"action":"remove","lines":["l"]},{"start":{"row":33,"column":18},"end":{"row":33,"column":19},"action":"remove","lines":["p"]},{"start":{"row":33,"column":17},"end":{"row":33,"column":18},"action":"remove","lines":["m"]},{"start":{"row":33,"column":16},"end":{"row":33,"column":17},"action":"remove","lines":["e"]},{"start":{"row":33,"column":15},"end":{"row":33,"column":16},"action":"remove","lines":["t"]},{"start":{"row":33,"column":14},"end":{"row":33,"column":15},"action":"remove","lines":[" "]},{"start":{"row":33,"column":13},"end":{"row":33,"column":14},"action":"remove","lines":["t"]},{"start":{"row":33,"column":12},"end":{"row":33,"column":13},"action":"remove","lines":["o"]},{"start":{"row":33,"column":11},"end":{"row":33,"column":12},"action":"remove","lines":["n"]}],[{"start":{"row":33,"column":11},"end":{"row":33,"column":12},"action":"insert","lines":["t"],"id":2581},{"start":{"row":33,"column":12},"end":{"row":33,"column":13},"action":"insert","lines":["e"]},{"start":{"row":33,"column":13},"end":{"row":33,"column":14},"action":"insert","lines":["m"]},{"start":{"row":33,"column":14},"end":{"row":33,"column":15},"action":"insert","lines":["p"]},{"start":{"row":33,"column":15},"end":{"row":33,"column":16},"action":"insert","lines":["l"]},{"start":{"row":33,"column":16},"end":{"row":33,"column":17},"action":"insert","lines":["a"]},{"start":{"row":33,"column":17},"end":{"row":33,"column":18},"action":"insert","lines":["t"]},{"start":{"row":33,"column":18},"end":{"row":33,"column":19},"action":"insert","lines":["e"]},{"start":{"row":33,"column":19},"end":{"row":33,"column":20},"action":"insert","lines":[":"]}],[{"start":{"row":33,"column":20},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":2582},{"start":{"row":34,"column":0},"end":{"row":34,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":12},"action":"remove","lines":["    "],"id":2583}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":9},"action":"insert","lines":["e"],"id":2584},{"start":{"row":34,"column":9},"end":{"row":34,"column":10},"action":"insert","lines":["l"]},{"start":{"row":34,"column":10},"end":{"row":34,"column":11},"action":"insert","lines":["s"]},{"start":{"row":34,"column":11},"end":{"row":34,"column":12},"action":"insert","lines":["e"]},{"start":{"row":34,"column":12},"end":{"row":34,"column":13},"action":"insert","lines":[":"]}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "],"id":2585},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":33,"column":20},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":2586},{"start":{"row":34,"column":0},"end":{"row":34,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":34,"column":12},"end":{"row":34,"column":56},"action":"insert","lines":["for position in location.position_set.all():"],"id":2587}],[{"start":{"row":34,"column":56},"end":{"row":35,"column":0},"action":"insert","lines":["",""],"id":2588},{"start":{"row":35,"column":0},"end":{"row":35,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":33,"column":0},"end":{"row":36,"column":13},"action":"remove","lines":["        if template:","            for position in location.position_set.all():","                ","        else:"],"id":2589},{"start":{"row":32,"column":52},"end":{"row":33,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["    "],"id":2590},{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"remove","lines":["    "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":130,"column":29},"end":{"row":131,"column":0},"action":"insert","lines":["",""],"id":2591},{"start":{"row":131,"column":0},"end":{"row":131,"column":4},"action":"insert","lines":["    "]},{"start":{"row":131,"column":4},"end":{"row":131,"column":5},"action":"insert","lines":["s"]},{"start":{"row":131,"column":5},"end":{"row":131,"column":6},"action":"insert","lines":["c"]},{"start":{"row":131,"column":6},"end":{"row":131,"column":7},"action":"insert","lines":["h"]},{"start":{"row":131,"column":7},"end":{"row":131,"column":8},"action":"insert","lines":["e"]},{"start":{"row":131,"column":8},"end":{"row":131,"column":9},"action":"insert","lines":["d"]},{"start":{"row":131,"column":9},"end":{"row":131,"column":10},"action":"insert","lines":["u"]},{"start":{"row":131,"column":10},"end":{"row":131,"column":11},"action":"insert","lines":["l"]},{"start":{"row":131,"column":11},"end":{"row":131,"column":12},"action":"insert","lines":["e"]}],[{"start":{"row":131,"column":12},"end":{"row":131,"column":13},"action":"insert","lines":[" "],"id":2592},{"start":{"row":131,"column":13},"end":{"row":131,"column":14},"action":"insert","lines":["="]}],[{"start":{"row":131,"column":14},"end":{"row":131,"column":15},"action":"insert","lines":[" "],"id":2593}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":80},"action":"insert","lines":["def schedule_template(schedule={},locations=None,template=False):"],"id":2594}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":19},"action":"remove","lines":["def "],"id":2595}],[{"start":{"row":131,"column":33},"end":{"row":131,"column":74},"action":"remove","lines":["schedule={},locations=None,template=False"],"id":2596}],[{"start":{"row":132,"column":0},"end":{"row":132,"column":4},"action":"remove","lines":["    "],"id":2597}],[{"start":{"row":132,"column":0},"end":{"row":133,"column":0},"action":"insert","lines":["",""],"id":2598},{"start":{"row":133,"column":0},"end":{"row":134,"column":0},"action":"insert","lines":["",""]},{"start":{"row":134,"column":0},"end":{"row":135,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":135,"column":0},"end":{"row":144,"column":72},"action":"insert","lines":["    all_employees = Employee.objects.all()","    event = Event.objects.get(slug=slug)","    template = json.loads(event.schedule) if event.schedule else schedule_template()","    myjson = json.loads(event.schedule)","    context = {'event':event,","               'schedule':template,","               'all_employees':all_employees,","               'roles': ['Managers','Cashiers','Preps','Bartenders'],","               }","    return render(request, './events/detail/event_detail.html', context)"],"id":2599}],[{"start":{"row":135,"column":4},"end":{"row":135,"column":6},"action":"insert","lines":["# "],"id":2600}],[{"start":{"row":136,"column":4},"end":{"row":136,"column":6},"action":"insert","lines":["# "],"id":2601}],[{"start":{"row":137,"column":4},"end":{"row":137,"column":6},"action":"insert","lines":["# "],"id":2602}],[{"start":{"row":131,"column":4},"end":{"row":131,"column":12},"action":"remove","lines":["schedule"],"id":2603},{"start":{"row":131,"column":4},"end":{"row":131,"column":5},"action":"insert","lines":["t"]},{"start":{"row":131,"column":5},"end":{"row":131,"column":6},"action":"insert","lines":["e"]},{"start":{"row":131,"column":6},"end":{"row":131,"column":7},"action":"insert","lines":["m"]},{"start":{"row":131,"column":7},"end":{"row":131,"column":8},"action":"insert","lines":["p"]},{"start":{"row":131,"column":8},"end":{"row":131,"column":9},"action":"insert","lines":["l"]},{"start":{"row":131,"column":9},"end":{"row":131,"column":10},"action":"insert","lines":["t"]},{"start":{"row":131,"column":10},"end":{"row":131,"column":11},"action":"insert","lines":["e"]}],[{"start":{"row":131,"column":10},"end":{"row":131,"column":11},"action":"remove","lines":["e"],"id":2604},{"start":{"row":131,"column":9},"end":{"row":131,"column":10},"action":"remove","lines":["t"]}],[{"start":{"row":131,"column":9},"end":{"row":131,"column":10},"action":"insert","lines":["a"],"id":2605},{"start":{"row":131,"column":10},"end":{"row":131,"column":11},"action":"insert","lines":["t"]},{"start":{"row":131,"column":11},"end":{"row":131,"column":12},"action":"insert","lines":["e"]}],[{"start":{"row":43,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["    myjson = json.loads(event.schedule)",""],"id":2606}],[{"start":{"row":132,"column":0},"end":{"row":136,"column":86},"action":"remove","lines":["","","    # all_employees = Employee.objects.all()","    # event = Event.objects.get(slug=slug)","    # template = json.loads(event.schedule) if event.schedule else schedule_template()"],"id":2608},{"start":{"row":131,"column":0},"end":{"row":132,"column":0},"action":"remove","lines":["",""]},{"start":{"row":130,"column":35},"end":{"row":131,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":131,"column":0},"end":{"row":132,"column":0},"action":"remove","lines":["    myjson = json.loads(event.schedule)",""],"id":2609}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":29},"action":"remove","lines":["'event':event,"],"id":2610}],[{"start":{"row":130,"column":4},"end":{"row":130,"column":12},"action":"remove","lines":["template"],"id":2611},{"start":{"row":130,"column":4},"end":{"row":130,"column":5},"action":"insert","lines":["s"]},{"start":{"row":130,"column":5},"end":{"row":130,"column":6},"action":"insert","lines":["c"]},{"start":{"row":130,"column":6},"end":{"row":130,"column":7},"action":"insert","lines":["h"]},{"start":{"row":130,"column":7},"end":{"row":130,"column":8},"action":"insert","lines":["e"]},{"start":{"row":130,"column":8},"end":{"row":130,"column":9},"action":"insert","lines":["d"]},{"start":{"row":130,"column":9},"end":{"row":130,"column":10},"action":"insert","lines":["u"]},{"start":{"row":130,"column":10},"end":{"row":130,"column":11},"action":"insert","lines":["l"]},{"start":{"row":130,"column":11},"end":{"row":130,"column":12},"action":"insert","lines":["e"]}],[{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"remove","lines":[" "],"id":2612},{"start":{"row":132,"column":13},"end":{"row":132,"column":14},"action":"remove","lines":[" "]},{"start":{"row":132,"column":12},"end":{"row":132,"column":13},"action":"remove","lines":[" "]},{"start":{"row":132,"column":8},"end":{"row":132,"column":12},"action":"remove","lines":["    "]},{"start":{"row":132,"column":4},"end":{"row":132,"column":8},"action":"remove","lines":["    "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":4},"action":"remove","lines":["    "]},{"start":{"row":131,"column":15},"end":{"row":132,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":132,"column":15},"end":{"row":132,"column":45},"action":"remove","lines":["'all_employees':all_employees,"],"id":2613},{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"remove","lines":[" "]},{"start":{"row":132,"column":13},"end":{"row":132,"column":14},"action":"remove","lines":[" "]},{"start":{"row":132,"column":12},"end":{"row":132,"column":13},"action":"remove","lines":[" "]},{"start":{"row":132,"column":8},"end":{"row":132,"column":12},"action":"remove","lines":["    "]},{"start":{"row":132,"column":4},"end":{"row":132,"column":8},"action":"remove","lines":["    "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":4},"action":"remove","lines":["    "]},{"start":{"row":131,"column":35},"end":{"row":132,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":134,"column":37},"end":{"row":134,"column":43},"action":"remove","lines":["detail"],"id":2614},{"start":{"row":134,"column":37},"end":{"row":134,"column":38},"action":"insert","lines":["t"]},{"start":{"row":134,"column":38},"end":{"row":134,"column":39},"action":"insert","lines":["e"]},{"start":{"row":134,"column":39},"end":{"row":134,"column":40},"action":"insert","lines":["m"]},{"start":{"row":134,"column":40},"end":{"row":134,"column":41},"action":"insert","lines":["p"]},{"start":{"row":134,"column":41},"end":{"row":134,"column":42},"action":"insert","lines":["l"]},{"start":{"row":134,"column":42},"end":{"row":134,"column":43},"action":"insert","lines":["a"]},{"start":{"row":134,"column":43},"end":{"row":134,"column":44},"action":"insert","lines":["t"]},{"start":{"row":134,"column":44},"end":{"row":134,"column":45},"action":"insert","lines":["e"]},{"start":{"row":134,"column":45},"end":{"row":134,"column":46},"action":"insert","lines":["s"]}],[{"start":{"row":134,"column":47},"end":{"row":134,"column":59},"action":"remove","lines":["event_detail"],"id":2615},{"start":{"row":134,"column":47},"end":{"row":134,"column":48},"action":"insert","lines":["c"]},{"start":{"row":134,"column":48},"end":{"row":134,"column":49},"action":"insert","lines":["r"]},{"start":{"row":134,"column":49},"end":{"row":134,"column":50},"action":"insert","lines":["e"]},{"start":{"row":134,"column":50},"end":{"row":134,"column":51},"action":"insert","lines":["a"]},{"start":{"row":134,"column":51},"end":{"row":134,"column":52},"action":"insert","lines":["t"]},{"start":{"row":134,"column":52},"end":{"row":134,"column":53},"action":"insert","lines":["e"]}],[{"start":{"row":130,"column":34},"end":{"row":130,"column":35},"action":"remove","lines":[":"],"id":2616}],[{"start":{"row":131,"column":26},"end":{"row":131,"column":34},"action":"remove","lines":["template"],"id":2617},{"start":{"row":131,"column":26},"end":{"row":131,"column":27},"action":"insert","lines":["s"]},{"start":{"row":131,"column":27},"end":{"row":131,"column":28},"action":"insert","lines":["c"]},{"start":{"row":131,"column":28},"end":{"row":131,"column":29},"action":"insert","lines":["h"]},{"start":{"row":131,"column":29},"end":{"row":131,"column":30},"action":"insert","lines":["e"]},{"start":{"row":131,"column":30},"end":{"row":131,"column":31},"action":"insert","lines":["d"]},{"start":{"row":131,"column":31},"end":{"row":131,"column":32},"action":"insert","lines":["u"]},{"start":{"row":131,"column":32},"end":{"row":131,"column":33},"action":"insert","lines":["l"]},{"start":{"row":131,"column":33},"end":{"row":131,"column":34},"action":"insert","lines":["e"]}],[{"start":{"row":132,"column":69},"end":{"row":133,"column":0},"action":"insert","lines":["",""],"id":2618},{"start":{"row":133,"column":0},"end":{"row":133,"column":15},"action":"insert","lines":["               "]}],[{"start":{"row":133,"column":15},"end":{"row":133,"column":17},"action":"insert","lines":["''"],"id":2619}],[{"start":{"row":133,"column":16},"end":{"row":133,"column":17},"action":"insert","lines":["t"],"id":2620},{"start":{"row":133,"column":17},"end":{"row":133,"column":18},"action":"insert","lines":["e"]},{"start":{"row":133,"column":18},"end":{"row":133,"column":19},"action":"insert","lines":["m"]},{"start":{"row":133,"column":19},"end":{"row":133,"column":20},"action":"insert","lines":["p"]},{"start":{"row":133,"column":20},"end":{"row":133,"column":21},"action":"insert","lines":["l"]},{"start":{"row":133,"column":21},"end":{"row":133,"column":22},"action":"insert","lines":["a"]},{"start":{"row":133,"column":22},"end":{"row":133,"column":23},"action":"insert","lines":["t"]},{"start":{"row":133,"column":23},"end":{"row":133,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":133,"column":25},"end":{"row":133,"column":26},"action":"insert","lines":[":"],"id":2621},{"start":{"row":133,"column":26},"end":{"row":133,"column":27},"action":"insert","lines":["T"]},{"start":{"row":133,"column":27},"end":{"row":133,"column":28},"action":"insert","lines":["r"]},{"start":{"row":133,"column":28},"end":{"row":133,"column":29},"action":"insert","lines":["u"]},{"start":{"row":133,"column":29},"end":{"row":133,"column":30},"action":"insert","lines":["e"]}],[{"start":{"row":46,"column":69},"end":{"row":47,"column":0},"action":"insert","lines":["",""],"id":2622},{"start":{"row":47,"column":0},"end":{"row":47,"column":15},"action":"insert","lines":["               "]},{"start":{"row":47,"column":15},"end":{"row":47,"column":16},"action":"insert","lines":["t"]},{"start":{"row":47,"column":16},"end":{"row":47,"column":17},"action":"insert","lines":["e"]},{"start":{"row":47,"column":17},"end":{"row":47,"column":18},"action":"insert","lines":["m"]},{"start":{"row":47,"column":18},"end":{"row":47,"column":19},"action":"insert","lines":["p"]},{"start":{"row":47,"column":19},"end":{"row":47,"column":20},"action":"insert","lines":["l"]}],[{"start":{"row":47,"column":19},"end":{"row":47,"column":20},"action":"remove","lines":["l"],"id":2623},{"start":{"row":47,"column":18},"end":{"row":47,"column":19},"action":"remove","lines":["p"]},{"start":{"row":47,"column":17},"end":{"row":47,"column":18},"action":"remove","lines":["m"]},{"start":{"row":47,"column":16},"end":{"row":47,"column":17},"action":"remove","lines":["e"]},{"start":{"row":47,"column":15},"end":{"row":47,"column":16},"action":"remove","lines":["t"]}],[{"start":{"row":47,"column":15},"end":{"row":47,"column":17},"action":"insert","lines":["''"],"id":2624}],[{"start":{"row":47,"column":16},"end":{"row":47,"column":17},"action":"insert","lines":["t"],"id":2625},{"start":{"row":47,"column":17},"end":{"row":47,"column":18},"action":"insert","lines":["e"]},{"start":{"row":47,"column":18},"end":{"row":47,"column":19},"action":"insert","lines":["m"]},{"start":{"row":47,"column":19},"end":{"row":47,"column":20},"action":"insert","lines":["p"]},{"start":{"row":47,"column":20},"end":{"row":47,"column":21},"action":"insert","lines":["l"]},{"start":{"row":47,"column":21},"end":{"row":47,"column":22},"action":"insert","lines":["a"]},{"start":{"row":47,"column":22},"end":{"row":47,"column":23},"action":"insert","lines":["t"]},{"start":{"row":47,"column":23},"end":{"row":47,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":47,"column":25},"end":{"row":47,"column":26},"action":"insert","lines":[":"],"id":2626},{"start":{"row":47,"column":26},"end":{"row":47,"column":27},"action":"insert","lines":["F"]},{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"insert","lines":["a"]},{"start":{"row":47,"column":28},"end":{"row":47,"column":29},"action":"insert","lines":["l"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"insert","lines":["s"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":134,"column":26},"end":{"row":134,"column":30},"action":"remove","lines":["True"],"id":2627},{"start":{"row":134,"column":26},"end":{"row":134,"column":27},"action":"insert","lines":["N"]},{"start":{"row":134,"column":27},"end":{"row":134,"column":28},"action":"insert","lines":["o"]},{"start":{"row":134,"column":28},"end":{"row":134,"column":29},"action":"insert","lines":["n"]},{"start":{"row":134,"column":29},"end":{"row":134,"column":30},"action":"insert","lines":["e"]}],[{"start":{"row":134,"column":29},"end":{"row":134,"column":30},"action":"remove","lines":["e"],"id":2628},{"start":{"row":134,"column":28},"end":{"row":134,"column":29},"action":"remove","lines":["n"]},{"start":{"row":134,"column":27},"end":{"row":134,"column":28},"action":"remove","lines":["o"]},{"start":{"row":134,"column":26},"end":{"row":134,"column":27},"action":"remove","lines":["N"]}],[{"start":{"row":134,"column":26},"end":{"row":134,"column":28},"action":"insert","lines":["''"],"id":2629}],[{"start":{"row":134,"column":27},"end":{"row":134,"column":28},"action":"insert","lines":["d"],"id":2630},{"start":{"row":134,"column":28},"end":{"row":134,"column":29},"action":"insert","lines":["-"]},{"start":{"row":134,"column":29},"end":{"row":134,"column":30},"action":"insert","lines":["n"]},{"start":{"row":134,"column":30},"end":{"row":134,"column":31},"action":"insert","lines":["o"]},{"start":{"row":134,"column":31},"end":{"row":134,"column":32},"action":"insert","lines":["n"]},{"start":{"row":134,"column":32},"end":{"row":134,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":47,"column":26},"end":{"row":47,"column":31},"action":"remove","lines":["False"],"id":2631},{"start":{"row":47,"column":26},"end":{"row":47,"column":27},"action":"insert","lines":["'"]},{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"insert","lines":["d"]},{"start":{"row":47,"column":28},"end":{"row":47,"column":29},"action":"insert","lines":["-"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"insert","lines":["f"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"insert","lines":["l"]},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"insert","lines":["e"]},{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"insert","lines":["x"]}],[{"start":{"row":47,"column":33},"end":{"row":47,"column":34},"action":"insert","lines":["'"],"id":2632}],[{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"remove","lines":["x"],"id":2633},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"remove","lines":["e"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"remove","lines":["l"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"remove","lines":["f"]}],[{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"insert","lines":["h"],"id":2634},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"insert","lines":["i"]},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"insert","lines":["d"]},{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":47,"column":34},"end":{"row":48,"column":0},"action":"insert","lines":["",""],"id":2635},{"start":{"row":48,"column":0},"end":{"row":48,"column":15},"action":"insert","lines":["               "]}],[{"start":{"row":48,"column":15},"end":{"row":48,"column":17},"action":"insert","lines":["''"],"id":2636}],[{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":[":"],"id":2637}],[{"start":{"row":48,"column":18},"end":{"row":48,"column":20},"action":"insert","lines":["''"],"id":2638}],[{"start":{"row":48,"column":19},"end":{"row":48,"column":20},"action":"insert","lines":["d"],"id":2639},{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":["-"]},{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"insert","lines":["f"]},{"start":{"row":48,"column":22},"end":{"row":48,"column":23},"action":"insert","lines":["l"]},{"start":{"row":48,"column":23},"end":{"row":48,"column":24},"action":"insert","lines":["e"]},{"start":{"row":48,"column":24},"end":{"row":48,"column":25},"action":"insert","lines":["x"]}],[{"start":{"row":47,"column":34},"end":{"row":47,"column":35},"action":"insert","lines":[","],"id":2640}],[{"start":{"row":48,"column":16},"end":{"row":48,"column":17},"action":"insert","lines":["d"],"id":2641},{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":["e"]},{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["t"]},{"start":{"row":48,"column":19},"end":{"row":48,"column":20},"action":"insert","lines":["a"]},{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":["i"]},{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"insert","lines":["l"]}],[{"start":{"row":135,"column":32},"end":{"row":135,"column":33},"action":"remove","lines":["e"],"id":2642},{"start":{"row":135,"column":31},"end":{"row":135,"column":32},"action":"remove","lines":["n"]},{"start":{"row":135,"column":30},"end":{"row":135,"column":31},"action":"remove","lines":["o"]},{"start":{"row":135,"column":29},"end":{"row":135,"column":30},"action":"remove","lines":["n"]}],[{"start":{"row":135,"column":29},"end":{"row":135,"column":30},"action":"insert","lines":["d"],"id":2643}],[{"start":{"row":135,"column":29},"end":{"row":135,"column":30},"action":"remove","lines":["d"],"id":2644}],[{"start":{"row":135,"column":29},"end":{"row":135,"column":30},"action":"insert","lines":["f"],"id":2645},{"start":{"row":135,"column":30},"end":{"row":135,"column":31},"action":"insert","lines":["l"]},{"start":{"row":135,"column":31},"end":{"row":135,"column":32},"action":"insert","lines":["e"]},{"start":{"row":135,"column":32},"end":{"row":135,"column":33},"action":"insert","lines":["x"]}],[{"start":{"row":135,"column":34},"end":{"row":135,"column":35},"action":"insert","lines":[","],"id":2646}],[{"start":{"row":135,"column":35},"end":{"row":136,"column":0},"action":"insert","lines":["",""],"id":2647},{"start":{"row":136,"column":0},"end":{"row":136,"column":15},"action":"insert","lines":["               "]},{"start":{"row":136,"column":15},"end":{"row":136,"column":16},"action":"insert","lines":["d"]},{"start":{"row":136,"column":16},"end":{"row":136,"column":17},"action":"insert","lines":["e"]},{"start":{"row":136,"column":17},"end":{"row":136,"column":18},"action":"insert","lines":["t"]},{"start":{"row":136,"column":18},"end":{"row":136,"column":19},"action":"insert","lines":["a"]},{"start":{"row":136,"column":19},"end":{"row":136,"column":20},"action":"insert","lines":["i"]},{"start":{"row":136,"column":20},"end":{"row":136,"column":21},"action":"insert","lines":["l"]}],[{"start":{"row":136,"column":20},"end":{"row":136,"column":21},"action":"remove","lines":["l"],"id":2648},{"start":{"row":136,"column":19},"end":{"row":136,"column":20},"action":"remove","lines":["i"]},{"start":{"row":136,"column":18},"end":{"row":136,"column":19},"action":"remove","lines":["a"]},{"start":{"row":136,"column":17},"end":{"row":136,"column":18},"action":"remove","lines":["t"]},{"start":{"row":136,"column":16},"end":{"row":136,"column":17},"action":"remove","lines":["e"]},{"start":{"row":136,"column":15},"end":{"row":136,"column":16},"action":"remove","lines":["d"]}],[{"start":{"row":136,"column":15},"end":{"row":136,"column":17},"action":"insert","lines":["''"],"id":2649}],[{"start":{"row":136,"column":16},"end":{"row":136,"column":17},"action":"insert","lines":["d"],"id":2650},{"start":{"row":136,"column":17},"end":{"row":136,"column":18},"action":"insert","lines":["e"]},{"start":{"row":136,"column":18},"end":{"row":136,"column":19},"action":"insert","lines":["t"]},{"start":{"row":136,"column":19},"end":{"row":136,"column":20},"action":"insert","lines":["a"]},{"start":{"row":136,"column":20},"end":{"row":136,"column":21},"action":"insert","lines":["i"]},{"start":{"row":136,"column":21},"end":{"row":136,"column":22},"action":"insert","lines":["l"]}],[{"start":{"row":136,"column":23},"end":{"row":136,"column":24},"action":"insert","lines":[":"],"id":2651}],[{"start":{"row":136,"column":24},"end":{"row":136,"column":26},"action":"insert","lines":["''"],"id":2652}],[{"start":{"row":136,"column":25},"end":{"row":136,"column":26},"action":"insert","lines":["d"],"id":2653},{"start":{"row":136,"column":26},"end":{"row":136,"column":27},"action":"insert","lines":["-"]},{"start":{"row":136,"column":27},"end":{"row":136,"column":28},"action":"insert","lines":["h"]},{"start":{"row":136,"column":28},"end":{"row":136,"column":29},"action":"insert","lines":["i"]},{"start":{"row":136,"column":29},"end":{"row":136,"column":30},"action":"insert","lines":["d"]},{"start":{"row":136,"column":30},"end":{"row":136,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":136,"column":30},"end":{"row":136,"column":31},"action":"remove","lines":["e"],"id":2654},{"start":{"row":136,"column":29},"end":{"row":136,"column":30},"action":"remove","lines":["d"]},{"start":{"row":136,"column":28},"end":{"row":136,"column":29},"action":"remove","lines":["i"]},{"start":{"row":136,"column":27},"end":{"row":136,"column":28},"action":"remove","lines":["h"]}],[{"start":{"row":136,"column":27},"end":{"row":136,"column":28},"action":"insert","lines":["n"],"id":2655},{"start":{"row":136,"column":28},"end":{"row":136,"column":29},"action":"insert","lines":["o"]},{"start":{"row":136,"column":29},"end":{"row":136,"column":30},"action":"insert","lines":["n"]},{"start":{"row":136,"column":30},"end":{"row":136,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"remove","lines":["e"],"id":2656},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"remove","lines":["d"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"remove","lines":["i"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"remove","lines":["h"]}],[{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"insert","lines":["n"],"id":2657},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"insert","lines":["o"]},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"insert","lines":["n"]},{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":47,"column":32},"end":{"row":47,"column":33},"action":"remove","lines":["e"],"id":2658},{"start":{"row":47,"column":31},"end":{"row":47,"column":32},"action":"remove","lines":["n"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"remove","lines":["o"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"remove","lines":["n"]},{"start":{"row":47,"column":28},"end":{"row":47,"column":29},"action":"remove","lines":["-"]},{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"remove","lines":["d"]}],[{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"insert","lines":["F"],"id":2659}],[{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"remove","lines":["F"],"id":2660}],[{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"remove","lines":["'"],"id":2661},{"start":{"row":47,"column":26},"end":{"row":47,"column":27},"action":"remove","lines":["'"]}],[{"start":{"row":47,"column":26},"end":{"row":47,"column":27},"action":"insert","lines":["F"],"id":2662},{"start":{"row":47,"column":27},"end":{"row":47,"column":28},"action":"insert","lines":["a"]},{"start":{"row":47,"column":28},"end":{"row":47,"column":29},"action":"insert","lines":["l"]},{"start":{"row":47,"column":29},"end":{"row":47,"column":30},"action":"insert","lines":["s"]},{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["               'detail':'d-flex'",""],"id":2663}],[{"start":{"row":134,"column":32},"end":{"row":134,"column":33},"action":"remove","lines":["x"],"id":2664},{"start":{"row":134,"column":31},"end":{"row":134,"column":32},"action":"remove","lines":["e"]},{"start":{"row":134,"column":30},"end":{"row":134,"column":31},"action":"remove","lines":["l"]},{"start":{"row":134,"column":29},"end":{"row":134,"column":30},"action":"remove","lines":["f"]},{"start":{"row":134,"column":28},"end":{"row":134,"column":29},"action":"remove","lines":["-"]},{"start":{"row":134,"column":27},"end":{"row":134,"column":28},"action":"remove","lines":["d"]},{"start":{"row":134,"column":26},"end":{"row":134,"column":28},"action":"remove","lines":["''"]}],[{"start":{"row":134,"column":26},"end":{"row":134,"column":27},"action":"insert","lines":["T"],"id":2665},{"start":{"row":134,"column":27},"end":{"row":134,"column":28},"action":"insert","lines":["r"]},{"start":{"row":134,"column":28},"end":{"row":134,"column":29},"action":"insert","lines":["u"]},{"start":{"row":134,"column":29},"end":{"row":134,"column":30},"action":"insert","lines":["e"]}],[{"start":{"row":22,"column":39},"end":{"row":23,"column":0},"action":"insert","lines":["",""],"id":2666},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"remove","lines":["    "],"id":2667}],[{"start":{"row":23,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["",""],"id":2668}],[{"start":{"row":24,"column":0},"end":{"row":33,"column":0},"action":"insert","lines":["@csrf_exempt","def update_schedule(request):","    if request.method == 'POST':","        mydata = request.POST.get('schedule', None)","        pk = request.POST.get('event_id', None)","        event = get_object_or_404(Event, pk=pk)","        event.schedule = mydata","        event.save()","    return HttpResponse(\"I'm working!\")",""],"id":2669}],[{"start":{"row":25,"column":4},"end":{"row":25,"column":19},"action":"remove","lines":["update_schedule"],"id":2670},{"start":{"row":25,"column":4},"end":{"row":25,"column":5},"action":"insert","lines":["c"]},{"start":{"row":25,"column":5},"end":{"row":25,"column":6},"action":"insert","lines":["r"]},{"start":{"row":25,"column":6},"end":{"row":25,"column":7},"action":"insert","lines":["e"]},{"start":{"row":25,"column":7},"end":{"row":25,"column":8},"action":"insert","lines":["a"]},{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"insert","lines":["t"]},{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"insert","lines":["e"]},{"start":{"row":25,"column":10},"end":{"row":25,"column":11},"action":"insert","lines":["_"]},{"start":{"row":25,"column":11},"end":{"row":25,"column":12},"action":"insert","lines":["t"]},{"start":{"row":25,"column":12},"end":{"row":25,"column":13},"action":"insert","lines":["e"]},{"start":{"row":25,"column":13},"end":{"row":25,"column":14},"action":"insert","lines":["m"]},{"start":{"row":25,"column":14},"end":{"row":25,"column":15},"action":"insert","lines":["p"]},{"start":{"row":25,"column":15},"end":{"row":25,"column":16},"action":"insert","lines":["l"]},{"start":{"row":25,"column":16},"end":{"row":25,"column":17},"action":"insert","lines":["a"]}],[{"start":{"row":25,"column":17},"end":{"row":25,"column":18},"action":"insert","lines":["t"],"id":2671},{"start":{"row":25,"column":18},"end":{"row":25,"column":19},"action":"insert","lines":["e"]}]]},"ace":{"folds":[],"scrolltop":1268,"scrollleft":0,"selection":{"start":{"row":6,"column":0},"end":{"row":6,"column":0},"isBackwards":false},"options":{"tabSize":4,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1533662654342}